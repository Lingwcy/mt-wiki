# ğŸ—ï¸ ç©å®¶å»ºç­‘é‰´èµ

<div class="intro-card">
  <p>è¿™é‡Œå±•ç¤ºäº†å–µé•‡æœåŠ¡å™¨ä¸­ç©å®¶ä»¬ç²¾å¿ƒåˆ›ä½œçš„å„ç±»å»ºç­‘ä½œå“ã€‚æ¯ä¸€åº§å»ºç­‘éƒ½ä»£è¡¨ç€ç©å®¶ä»¬çš„åˆ›æ„å’Œçƒ­æƒ…ï¼Œå±•ç°äº†å–µé•‡å¤šæ ·åŒ–çš„å»ºç­‘é£æ ¼ã€‚</p>
  <p>å¦‚æœä½ ä¹Ÿæƒ³åœ¨è¿™é‡Œå±•ç¤ºè‡ªå·±çš„å»ºç­‘ä½œå“ï¼Œè¯·è”ç³»æœåŠ¡å™¨ç®¡ç†å‘˜è¿›è¡ŒæŠ•ç¨¿ï¼</p>
</div>

## ä¼˜ç§€å»ºç­‘ä½œå“

<!-- ç¯ç®±æ¨¡æ€æ¡† -->
<div id="lightbox" class="lightbox">
  <div class="lightbox-content">
    <span class="lightbox-close">&times;</span>
    <img id="lightbox-img" class="lightbox-img">
    <div class="lightbox-caption" id="lightbox-caption"></div>
  </div>
</div>

<div class="building-grid">
  <!-- å»ºç­‘å¡ç‰‡ç¤ºä¾‹1 -->
  <div class="building-card" data-category="fantasy">
    <div class="building-header">
      <h3 class="building-title">å–µé•‡</h3>
      <span class="building-author">ä½œè€…: <strong>LoverHan5</strong></span>
    </div>
    <div class="building-gallery">
      <div class="gallery-container">
        <div class="gallery-main">
          <img src="https://pic1.imgdb.cn/item/67bd841ad0e0a243d40509b1.png" alt="ä¸»è§†å›¾" class="main-image">
        </div>
        <div class="gallery-thumbs">
          <img src="https://pic1.imgdb.cn/item/67bd841ad0e0a243d40509b1.png" alt="è§†å›¾1" class="thumb active">
        </div>
      </div>
    </div>
    <div class="building-info">
      <div class="building-coords">åæ ‡: MiaoTown</div>
      <div class="building-desc">
        <p>å–µé•‡VIï¼Œä¸€ä¸ªæ–°çš„å¼€å§‹ï¼</p>
      </div>
      <div class="building-date">å®Œæˆæ—¶é—´: 2023å¹´12æœˆ10æ—¥</div>
    </div>
  </div>
  
  <!-- å»ºç­‘å¡ç‰‡ç¤ºä¾‹2 -->
  <div class="building-card" data-category="modern">
    <div class="building-header">
      <h3 class="building-title">ç™¾å¤–</h3>
      <span class="building-author">ä½œè€…: <strong>Fastiksã€Heimao2009</strong></span>
    </div>
    <div class="building-gallery">
      <div class="gallery-container">
        <div class="gallery-main">
          <img src="https://pic1.imgdb.cn/item/67f13cd30ba3d5a1d7ede74e.jpg" alt="ç™¾å¤–ä¸»è§†å›¾" class="main-image">
        </div>
        <div class="gallery-thumbs">
          <img src="https://pic1.imgdb.cn/item/67f13cd30ba3d5a1d7ede74e.jpg" alt="è§†å›¾1" class="thumb active">
        </div>
      </div>
    </div>
    <div class="building-info">
      <div class="building-coords">åæ ‡: X: 49149, Y: 87, Z: 51728</div>
      <div class="building-desc">
        <p>ç©å®¶è¿˜æœªå¡«å†™ä»‹ç»..</p>
      </div>
      <div class="building-date">æ”¶å½•æ—¶é—´: 2024å¹´4æœˆ5æ—¥</div>
    </div>
  </div>
  
  <!-- å»ºç­‘å¡ç‰‡ç¤ºä¾‹3 -->
  <div class="building-card" data-category="traditional">
    <div class="building-header">
      <h3 class="building-title">LingYuXuçš„é¢†åœ°</h3>
      <span class="building-author">ä½œè€…: <strong>LingYuXu</strong></span>
    </div>
    <div class="building-gallery">
      <div class="gallery-container">
        <div class="gallery-main">
          <img src="https://pic1.imgdb.cn/item/67f144990ba3d5a1d7edea9d.jpg" alt="ä¸»è§†å›¾" class="main-image">
        </div>
        <div class="gallery-thumbs">
          <img src="https://pic1.imgdb.cn/item/67f144990ba3d5a1d7edea9d.jpg" alt="è§†å›¾1" class="thumb active">
        </div>
      </div>
    </div>
    <div class="building-info">
      <div class="building-coords">åæ ‡: X: 49273, Y: 70, Z: 52485</div>
      <div class="building-desc">
        <p>ç©å®¶è¿˜æœªå¡«å†™ä»‹ç»..</p>
      </div>
      <div class="building-date">æ”¶å½•æ—¶é—´: 2024å¹´4æœˆ5æ—¥</div>
    </div>
  </div>
</div>

## å¦‚ä½•æäº¤æ‚¨çš„å»ºç­‘ä½œå“

<div class="submission-guide">
  <ol>
    <li>åœ¨æ¸¸æˆä¸­å®Œæˆæ‚¨çš„å»ºç­‘ä½œå“</li>
    <li>æˆªå–2-3å¼ ç²¾ç¾çš„å»ºç­‘æˆªå›¾ï¼ˆä¸åŒè§’åº¦ï¼‰</li>
    <li>å‡†å¤‡å»ºç­‘çš„åŸºæœ¬ä¿¡æ¯ï¼šæ ‡é¢˜ã€åæ ‡ã€ç®€ä»‹</li>
    <li>è”ç³»ç®¡ç†å‘˜æäº¤æ‚¨çš„ä½œå“</li>
  </ol>
  
  <div class="submission-note">
    <p>æ³¨æ„ï¼šæäº¤çš„å»ºç­‘ä½œå“éœ€è¦åŸåˆ›ï¼Œæˆ‘ä»¬ä¼šå¯¹å»ºç­‘è¿›è¡Œå®åœ°æŸ¥çœ‹ç¡®è®¤ã€‚æ¯ä½ç©å®¶æœ€å¤šå¯ä»¥å±•ç¤º3ä¸ªå»ºç­‘ä½œå“ã€‚</p>
  </div>
</div>

<script setup>
import { onMounted } from 'vue'

// Only run in client side
onMounted(() => {
  console.log('Script loaded and DOM mounted');
  
  // åˆ‡æ¢ä¸»å›¾ç‰‡çš„å‡½æ•°
  window.changeMainImage = function(thumbEl) {
    console.log('changeMainImage called for', thumbEl.src);
    // è·å–æ‰€æœ‰ç¼©ç•¥å›¾å’Œå½“å‰ç”»å»Šçš„ä¸»å›¾ç‰‡å…ƒç´ 
    const galleryContainer = thumbEl.closest('.gallery-container');
    const mainImage = galleryContainer.querySelector('.main-image');
    const thumbs = galleryContainer.querySelectorAll('.thumb');
    
    // æ›´æ–°ä¸»å›¾ç‰‡
    mainImage.src = thumbEl.src;
    mainImage.alt = thumbEl.alt;
    
    // æ›´æ–°ç¼©ç•¥å›¾æ¿€æ´»çŠ¶æ€
    thumbs.forEach(thumb => thumb.classList.remove('active'));
    thumbEl.classList.add('active');
  }

  // æ·»åŠ å»ºç­‘ç±»å‹è¿‡æ»¤åŠŸèƒ½
  const filterBtns = document.querySelectorAll('.filter-btn');
  const buildingCards = document.querySelectorAll('.building-card');
  
  filterBtns.forEach(btn => {
    btn.addEventListener('click', function() {
      // æ›´æ–°æŒ‰é’®çŠ¶æ€
      filterBtns.forEach(b => b.classList.remove('active'));
      this.classList.add('active');
      
      // è·å–è¿‡æ»¤ç±»åˆ«
      const filterValue = this.getAttribute('data-filter');
      
      // æ˜¾ç¤º/éšè—ç›¸åº”çš„å»ºç­‘å¡ç‰‡
      buildingCards.forEach(card => {
        if (filterValue === 'all' || card.getAttribute('data-category') === filterValue) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    });
  });
  
  // ç¯ç®±åŠŸèƒ½å®ç°
  const lightbox = document.getElementById('lightbox');
  const lightboxImg = document.getElementById('lightbox-img');
  const lightboxCaption = document.getElementById('lightbox-caption');
  const lightboxClose = document.querySelector('.lightbox-close');
  
  // ä¸ºä¸»å›¾ç‰‡æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼Œç¡®ä¿ä¸€æ¬¡ç‚¹å‡»å°±èƒ½è¾¾åˆ°æœ€å¤§å°ºå¯¸
  const mainImages = document.querySelectorAll('.main-image');
  mainImages.forEach(img => {
    img.addEventListener('click', function(e) {
      // æ‰“å¼€ç¯ç®±å¹¶æ˜¾ç¤ºå›¾ç‰‡
      e.stopPropagation(); // é˜»æ­¢äº‹ä»¶å†’æ³¡
      
      // é¢„åŠ è½½å›¾ç‰‡ä»¥ç¡®ä¿è·å¾—å®Œæ•´å°ºå¯¸
      const fullImg = new Image();
      fullImg.onload = function() {
        // å›¾ç‰‡åŠ è½½å®Œæˆåè®¾ç½®åˆ°ç¯ç®±
        lightboxImg.src = fullImg.src;
        lightboxImg.style.maxWidth = '100%';
        lightboxImg.style.maxHeight = '80vh';
        lightboxImg.style.width = 'auto';
        lightboxImg.style.height = 'auto';
        
        // æ˜¾ç¤ºç¯ç®±
        lightbox.style.display = 'flex';
      };
      fullImg.src = this.src;
      
      // è®¾ç½®æ ‡é¢˜
      lightboxCaption.textContent = this.alt;
      document.body.style.overflow = 'hidden'; // é˜²æ­¢èƒŒæ™¯æ»šåŠ¨
    });
  });
  
  // ç›´æ¥ä½¿ç”¨æ›´å¯é çš„æ–¹æ³•ä¸ºç¼©ç•¥å›¾æ·»åŠ ç‚¹å‡»äº‹ä»¶
  function setupThumbnailClicks() {
    console.log('Setting up thumbnail clicks');
    
    // æŸ¥æ‰¾æ‰€æœ‰ç¼©ç•¥å›¾
    const thumbs = document.querySelectorAll('.thumb');
    console.log('Found', thumbs.length, 'thumbnails');
    
    // ä¸ºæ¯ä¸ªç¼©ç•¥å›¾æ·»åŠ ç‚¹å‡»å¤„ç†
    thumbs.forEach((thumb, index) => {
      // ç§»é™¤æ—§çš„äº‹ä»¶ç›‘å¬å™¨ï¼ˆå¦‚æœæœ‰ï¼‰
      thumb.removeEventListener('click', thumbnailClickHandler);
      
      // æ·»åŠ æ–°çš„äº‹ä»¶ç›‘å¬å™¨
      thumb.addEventListener('click', thumbnailClickHandler);
      console.log('Added click handler to thumbnail', index + 1);
    });
  }
  
  // ç¼©ç•¥å›¾ç‚¹å‡»å¤„ç†å‡½æ•°
  function thumbnailClickHandler(e) {
    console.log('Thumbnail clicked:', this.src);
    e.preventDefault();
    e.stopPropagation();
    window.changeMainImage(this);
  }
  
  // é¦–æ¬¡è®¾ç½®
  setupThumbnailClicks();
  
  // å¦‚æœæœ‰åŠ¨æ€æ·»åŠ çš„ç¼©ç•¥å›¾ï¼Œå¯ä»¥åœ¨éœ€è¦æ—¶é‡æ–°è¿è¡Œ setupThumbnailClicks()
  
  // ä¹Ÿç›´æ¥æ·»åŠ å†…è”äº‹ä»¶å¤„ç† - å¤‡ç”¨æ–¹æ³•
  document.querySelectorAll('.thumb').forEach(thumb => {
    thumb.onclick = function(e) {
      e.stopPropagation();
      window.changeMainImage(this);
      return false;
    };
  });
  
  // ç‚¹å‡»å…³é—­æŒ‰é’®å…³é—­ç¯ç®±
  lightboxClose.addEventListener('click', function() {
    lightbox.style.display = 'none';
    document.body.style.overflow = 'auto'; // æ¢å¤èƒŒæ™¯æ»šåŠ¨
  });
  
  // ç‚¹å‡»ç¯ç®±èƒŒæ™¯å…³é—­ç¯ç®±
  lightbox.addEventListener('click', function(e) {
    if (e.target === lightbox) {
      lightbox.style.display = 'none';
      document.body.style.overflow = 'auto';
    }
  });
  
  // æŒ‰ESCé”®å…³é—­ç¯ç®±
  document.addEventListener('keydown', function(e) {
    if (e.key === 'Escape' && lightbox.style.display === 'flex') {
      lightbox.style.display = 'none';
      document.body.style.overflow = 'auto';
    }
  });
})
</script>

<style>
/* æ•´ä½“æ ·å¼ */
.intro-card {
  background-color: var(--vp-c-bg-soft);
  border-radius: 8px;
  padding: 20px;
  margin-bottom: 30px;
  border-left: 4px solid var(--vp-c-brand);
}

/* å»ºç­‘è¿‡æ»¤æŒ‰é’® */
.building-filters {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin-bottom: 25px;
}

.filter-btn {
  background-color: var(--vp-c-bg-soft);
  border: 1px solid var(--vp-c-divider);
  border-radius: 20px;
  padding: 6px 15px;
  font-size: 0.9rem;
  cursor: pointer;
  transition: all 0.3s ease;
}

.filter-btn:hover {
  background-color: var(--vp-c-gray-light-3);
}

.filter-btn.active {
  background-color: var(--vp-c-brand);
  color: white;
  border-color: var(--vp-c-brand);
}

/* å»ºç­‘ç½‘æ ¼å¸ƒå±€ */
.building-grid {
  display: grid;
  grid-template-columns: 1fr;  /* ä¿®æ”¹ä¸ºå•åˆ—å¸ƒå±€ */
  gap: 30px;
  margin-bottom: 40px;
  max-width: 900px;  /* è®¾ç½®æœ€å¤§å®½åº¦ï¼Œä½¿å¡ç‰‡ä¸ä¼šè¿‡å®½ */
  margin-left: auto;  /* ä½¿ç½‘æ ¼åœ¨é¡µé¢ä¸­å±…ä¸­ */
  margin-right: auto;  /* ä½¿ç½‘æ ¼åœ¨é¡µé¢ä¸­å±…ä¸­ */
}

/* å»ºç­‘å¡ç‰‡æ ·å¼ */
.building-card {
  border-radius: 10px;
  overflow: hidden;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
  background-color: var(--vp-c-bg-soft);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.building-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.15);
}

.building-header {
  padding: 15px;
  border-bottom: 1px solid var(--vp-c-divider);
}

.building-title {
  margin: 0 0 5px 0;
  font-size: 1.3rem;
  color: var(--vp-c-brand);
}

.building-author {
  font-size: 0.9rem;
  color: var(--vp-c-text-2);
}

/* å›¾ç‰‡ç”»å»Šæ ·å¼ */
.building-gallery {
  position: relative;
  overflow: hidden;
}

.gallery-container {
  width: 100%;
}

.gallery-main {
  width: 100%;
  height: 200px;
  overflow: hidden;
}

.main-image {
  width: 100%;
  height: 100%;
  object-fit: cover;
  transition: transform 0.3s ease;
}

.main-image:hover {
  transform: scale(1.05);
}

.gallery-thumbs {
  display: flex;
  gap: 8px;
  padding: 10px;
  background-color: rgba(0, 0, 0, 0.05);
}

.thumb {
  width: 60px;
  height: 40px;
  object-fit: cover;
  cursor: pointer;
  border: 2px solid transparent;
  border-radius: 4px;
  transition: all 0.2s ease;
}

.thumb:hover {
  transform: translateY(-2px);
}

.thumb.active {
  border-color: var(--vp-c-brand);
}

/* å»ºç­‘ä¿¡æ¯æ ·å¼ */
.building-info {
  padding: 15px;
}

.building-coords {
  font-size: 0.85rem;
  color: var(--vp-c-text-2);
  margin-bottom: 10px;
  padding: 5px 10px;
  background-color: var(--vp-c-bg);
  border-radius: 4px;
  display: inline-block;
}

.building-desc {
  margin-bottom: 15px;
  line-height: 1.5;
}

.building-date {
  font-size: 0.85rem;
  color: var(--vp-c-text-2);
  font-style: italic;
}

/* æäº¤æŒ‡å—æ ·å¼ */
.submission-guide {
  background-color: var(--vp-c-bg-soft);
  padding: 20px;
  border-radius: 8px;
  margin-top: 20px;
}

.submission-guide ol {
  padding-left: 20px;
}

.submission-guide li {
  margin-bottom: 10px;
}

.submission-note {
  margin-top: 15px;
  padding: 10px;
  background-color: var(--vp-c-warning-soft);
  border-left: 3px solid var(--vp-c-warning);
  border-radius: 4px;
}

/* ç¯ç®±æ ·å¼ */
.lightbox {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.9);
  justify-content: center;
  align-items: center;
  padding: 20px;
}

.lightbox-content {
  position: relative;
  max-width: 85%; /* å¢åŠ æœ€å¤§å®½åº¦æ¯”ä¾‹ */
  max-height: 90%;
  margin: 0 auto; /* ç¡®ä¿å†…å®¹å±…ä¸­ */
  animation: zoom 0.25s ease-out;
  /* å¯¹äºVitePressä¾§è¾¹æ ï¼Œæ·»åŠ åˆé€‚çš„å·¦ä¾§è¡¥å¿ */
  margin-left: min(calc(var(--vp-sidebar-width, 12%) / 2), 150px);
  /* å¢åŠ ç¯ç®±å†…å®¹åŒºçš„æœ€å°å®½åº¦ */
  min-width: 50%;
}

@keyframes zoom {
  from {transform: scale(0.5); opacity: 0.8;}
  to {transform: scale(1); opacity: 1;}
}

.lightbox-img {
  display: block;
  max-width: 100%;
  max-height: 85vh; /* å¢åŠ æœ€å¤§é«˜åº¦æ¯”ä¾‹ */
  width: auto;
  height: auto;
  object-fit: contain;
  border: 2px solid rgba(255, 255, 255, 0.2);
  border-radius: 4px;
}

/* å“åº”å¼è°ƒæ•´ï¼Œåœ¨å°å±å¹•ä¸Šä¸éœ€è¦è¾¹è· */
@media (max-width: 960px) {
  .lightbox-content {
    margin-left: auto;
    max-width: 90%;
  }
}

/* æ·»åŠ æŒ‡é’ˆæ ·å¼ï¼Œæç¤ºå›¾ç‰‡å¯ç‚¹å‡» */
.main-image, .thumb {
  cursor: pointer;
}

/* å“åº”å¼è®¾è®¡ */
@media (max-width: 768px) {
  .building-grid {
    grid-template-columns: 1fr;
  }
  
  .gallery-main {
    height: 180px;
  }
  
  .filter-btn {
    font-size: 0.8rem;
    padding: 5px 12px;
  }
}
</style>
